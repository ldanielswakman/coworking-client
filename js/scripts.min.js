var AppNav=Vue.component("app-nav",{props:["spaces_count","indexPage","filteredSortedSpaces","workspaceFilter"],template:'\n    <nav>\n\n      <div class="nav__left">\n\n        <router-link to="/" exact class="logo">\n\n          <i v-if="indexPage == false" class="ti ti-angle-left"></i>\n          <img src="images/logo.svg" alt="Coworking İstanbul" />\n\n        </router-link>\n\n        <div class="u-relative">\n          <object class="button-wrapper" :class="{ isExpanded: btnWrapperExpanded }" @click="btnWrapperExpanded = !btnWrapperExpanded">\n            <ul>\n              <li><a href="https://goo.gl/forms/x7rcWj1R1OKMKyQF2" target="_blank" class="button button--small button--theme u-mr1">Submit new space</a></li>\n            </ul>\n            <button class="button button--circle button--lightest" data-role="close">+</button>\n          </object>\n        </div>\n\n        <a href="javascript:void(0)" v-if="indexPage !== false" class="nav__toggle">\n          <i v-if="isExpanded" class="ti ti-arrow-circle-down ti-2x"></i>\n          <i v-if="!isExpanded" class="ti ti-arrow-circle-up ti-2x"></i>\n        </a>\n\n      </div>\n\n      <h1 v-if="false" class="c-greylight"><span class="badge badge--large bg-themeblue c-white u-mr1">{{ spaces_count }}</span> Spaces</h1>\n\n      <div class="nav__right">\n        <small class="c-greylight"><a href="http://www.ldaniel.eu/" target="_blank">{{ colophon }}</a></small>\n      </div>\n    </nav>\n  ',data:()=>({colophon:"by ldaniel.eu",isExpanded:!0,btnWrapperExpanded:!1})});Vue.component("space-item",{props:["space","mapHovered","visibleTypes","workspaceFilter"],template:'\n    <div class="item col-xs-12 col-sm-6 col-lg-4 u-mb2">\n\n      <router-link :to="{ path: \'/space/\' + space.id }" exact>\n\n        <div class="card card--list" v-bind:class="{ isHovered: hoverState }">\n\n          <div class="card__image u-mr2" v-bind:style="{ backgroundImage: \'url(\' + space.image.medium + \')\' }"></div>\n\n          <div class="card__panel">\n\n            <div class="card__overlay">\n              {{ getType(space.type) }}\n            </div>\n\n            <h3>{{ space.title }}</h3>\n\n            <p v-if="space.description">\n              {{ space.description }}\n            </p>\n\n            <div class="u-flex">\n              <span class="hasTooltip" v-for="ws in space.workspaces">\n                <div class="badge badge--small u-mr1" :class="getBadgeClass(ws.ws_type_id)">\n                  <img :src="\'images/type_\' + ws.ws_type_id + \'.svg\'" alt="" style="width: 1.5rem; margin-top: 0.25rem;" />\n                </div>\n                <div class="tooltip">\n                  <small class="u-opacity70">{{ ws.type }}</small><br>\n                  <small><b>{{ getPrice(ws.price_month) }}</b> per month</small>\n                </div>\n              </span>\n            </div>\n          \n          </div>\n\n        </div>\n\n      </router-link>\n\n    </div>\n  ',computed:{hoverState:function(){return this.mapHovered==this.space.id}},methods:{getType(e){output="";for(i in this.visibleTypes)this.visibleTypes[i].id==e&&(output=this.visibleTypes[i].name.toUpperCase());return output},getPrice:e=>e>0?e+"₺":"— ₺",getBadgeClass(e){return{isInactive:0!==this.workspaceFilter&&this.workspaceFilter!==parseInt(e)}}}}),Vue.component("space-reviews",{props:["googlePlace","googleReviewURL"],template:'\n    <div id="reviews" class="card__panel card-zigzag--right u-relative u-z1 u-pt10 u-pb6 bg-greylightest" style="margin-top: -2rem;">\n\n      <h4 class="u-mb2">Reviews</h4>\n\n      <div class="row row--nopadding">\n        <div v-for="review in googlePlace.reviews" class="col-xs-12 col-sm-6 col-lg-4">\n\n          <div class="u-pr3 u-mb4">\n\n            <i v-for="n in review.rating" class="ti ti-star"></i><i v-for="n in (5 - review.rating)" class="ti ti-star u-opacity30"></i>\n\n            <p>"{{ review.text }}"</p>\n\n            <p class="c-themeblue">{{ review.author_name }}</p>\n\n            <small class="c-greylight">{{ review.relative_time_description }}</small>\n\n          </div>\n\n        </div>\n      </div>\n\n      <div class="u-aligncenter">\n        <a :href="googleReviewURL"\n          v-if="googleReviewURL && googleReviewURL.length > 0"\n          class="button button--outline"\n          target="_blank">\n          <i class="ti ti-comment"></i> Add a review\n        </a>\n      </div>\n\n    </div>\n  '}),Vue.component("space-workspaces",{props:["space"],template:'\n    <div class="card__panel card-zigzag--right u-relative u-z1 u-pt10 u-pb6 bg-greylightest" style="margin-top: -2rem;">\n\n      <div class="row">\n        <div v-for="ws in space.workspaces" v-if="inArray(ws.ws_type_id, $root.visibleWorkspaces, \'idlkj\')" class="col-xs-12 col-sm u-mr2 u-aligncenter">\n\n          <div class="row">\n            <div class="col-xs-3 col-sm-12 u-mb4">\n              <div class="badge badge--xlarge bg-white">\n                <img :src="\'images/type_\' + ws.ws_type_id + \'.svg\'" alt="" style="width: 2.5rem; margin-top: 0.25rem;" />\n              </div>\n            </div>\n\n            <div class="col-xs-9 col-sm-12 u-mb4">\n              <h4>{{ ws.type }}</h4>\n\n              <span class="u-text-15x c-themeblue">{{ showPrice(ws.price_month) }}</span>\n              <p class="u-mv0 u-opacity50"><small>per month</small></p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  ',methods:{inArray(e,s,t){for(var i=0;i<s.length;i++)if(value=s[i].id,t&&t.length>0&&(value=s[i][t]),s[i].id==e)return!0;return!1},showPrice:e=>(output="—",e>0&&(output=Math.round(e)+" ₺"),output)}});var mapStyles=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"},{saturation:35},{lightness:40}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"},{lightness:15},{visibility:"on"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{lightness:15},{weight:1}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#30376b"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#eeeeee"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"},{lightness:20}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"},{lightness:21}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:20}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:29},{weight:.2}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",elementType:"geometry",stylers:[{lightness:19}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#ced1e0"},{lightness:15}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}];Vue.component("spaces-map",{props:["spaces"],template:'\n    <div class="spaces-map">\n      <gmap-map :center="{lat: defaultLocation.lat, lng: defaultLocation.lng}" :zoom="defaultLocation.zoom" v-bind:options="options">\n\n        <gmap-marker\n          v-if="space.location"\n          v-for="(space, index) in spaces"\n          :key="index"\n          :position="{lat:space.location.lat, lng:space.location.lng}"\n          :clickable="true"\n          @click="$emit(\'click\', space.id)"\n          @mouseover="$emit(\'hoverover\', space.id)"\n          @mouseout="$emit(\'hoverout\')"\n          :icon="{url:\'images/location-pin.svg\'}"\n        ></gmap-marker>\n\n      </gmap-map>\n    </div>\n  ',data:()=>({defaultLocation:{lat:41.06,lng:29.0193357,zoom:10},options:{styles:mapStyles,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1}})}),Vue.component("splash-dialog",{template:'\n  <div class="splash-dialog" :class="{ isVisible: isVisible }" @click="isVisible = false">\n\n      <img src="images/logo.svg" alt="Coworking İstanbul" style="height: 3rem;" />\n\n      <h3 class="u-mb3 u-mt3"><blockquote v-html="message"></blockquote></h3>\n\n      <button class="button button--theme" @click="isVisible = false">Show Spaces</button>\n\n    </div>\n  ',data:()=>({isVisible:!0,message:"Finding a <b>coworking space</b> in <b>İstanbul</b> doesn't have to be hard..."}),mounted(){var e=this;setTimeout(function(){e.isVisible=!1},3e3)}}),Vue.component("workspaces-prices",{props:["visibleWorkspaces","filteredSortedSpaces","workspaceFilter"],template:'\n    <div class="price-box" v-bind:class="{ isExpanded: isExpanded }">\n      <ul>\n        <li\n          v-for="ws in workspacesWithTotals"\n          v-if="ws.name !== \'All\'"\n          class="u-relative"\n          v-bind:class="{ isActive: isActiveWs(ws.id) }"\n          @click="$emit(\'click\', ws.id)">\n\n          <img :src="\'images/type_\' + ws.id + \'.svg\'" alt="" class="icon" />\n\n          <span class="name" v-html="ws.name"></span>\n\n          <small v-html="ws.averagePrice" class="price-label"></small>\n          \n        </li>\n      </ul>\n    </div>\n  ',data:()=>({isExpanded:!0}),computed:{workspacesWithTotals(){spaces=this.filteredSortedSpaces,visibleWorkspaces=this.visibleWorkspaces;for(i in visibleWorkspaces)id=visibleWorkspaces[i].id,time=1==id?"day":"month",visibleWorkspaces[i].averagePrice=this.getAvgPrice(spaces,id,time);return visibleWorkspaces}},methods:{isActiveWs(e){return 0==this.workspaceFilter||e==this.workspaceFilter},getAvgPrice(e,s,t){n_counted=0,ws_total=0,prefix="<b>",suffix="</b> ₺<br><span>per "+t+"</span>";for(i in e)for(j in e[i].workspaces)id=e[i].workspaces[j].ws_type_id,price=parseFloat(e[i].workspaces[j]["price_"+t]),id==s&&price>0&&(ws_total+=price,n_counted++);return ws_avg=n_counted>0?(ws_total/n_counted).toFixed(0):"—",prefix+ws_avg+suffix}}});var SpacesDetail=Vue.component("spaces-detail",{props:["id"],template:'\n    <div class="main">\n\n      <app-nav v-bind:indexPage="false"></app-nav>\n\n      <div class="space-detail">\n\n        <div class="gallery row row--nopadding">\n\n          <router-link to="/" exact class="space-detail__close">&times;</router-link>\n\n          \x3c!-- col-xs-6 col-sm-4 --\x3e\n          <div v-for="image, key, index in spaceGallery" v-bind:space="space" v-if="key < 1">\n            <figure>\n              <img v-if="image.URL.large" v-bind:src="image.URL.large" v-bind:alt="space.name + \' - \' + index" />\n              <img v-if="!image.URL.large" v-bind:src="image.URL.medium" v-bind:alt="space.name + \' - \' + index" />\n            </figure>\n          </div>\n\n        </div>\n\n        <div class="card card--comfy">\n          <div class="card__panel card-zigzag--left u-relative u-z2">\n\n            <a :href="googlePlace.url" v-if="googlePlace.rating" class="u-floatright u-mt2 u-ph1 bg-greylightest" style="border-radius: 0.5rem;" target="_blank">\n              <blockquote class="c-greylight"><i class="ti ti-star u-mr1"></i><span class="c-themeblue" style="font-size: 1.5rem;">{{ googlePlace.rating }}</span>/5.0</blockquote>\n            </a>\n\n            <h1 class="u-mv2">{{ space.title }}</h1>\n\n            <i class="ti ti-map-alt ti-15x u-mr1"></i> {{ space.address }}<span v-if="space.address">, </span>{{ space.address2 }}<span v-if="space.address2">, </span>{{ space.neighborhood }}<span v-if="space.neighborhood">, </span>{{ space.city }}\n\n            <p>{{ space.ws_type_id }}</p>\n\n            <p class="u-mr4">{{ space.description }}</p>\n\n            <div class="card__actions u-mt4 u-mb2 u-aligncenter">\n              <router-link\n                :to="{ hash: \'reviews\' }"\n                v-if="googleReviewURL && googleReviewURL.length > 0"\n                class="button button--outline">\n                <i class="ti ti-comment"></i> Reviews\n              </router-link>\n              <a :href="linkify(space.website)" class="button button--outline" target="_blank">Website <i class="ti ti-share"></i></a>\n              <a :href="space.URL" button class="button button--dark" target="_blank">Book a Space</a>\n            </div>\n\n          </div>\n\n          <space-workspaces v-bind:space="space"></space-workspaces>\n\n          <div class="card__panel card-zigzag--left u-relative u-z2 u-pb0">\n\n            <h4 class="u-mb2">Amenities</h4>\n\n            <div class="row row--nopadding">\n              <div v-for="item in spaceAmenities" class="col-xs-6 col-sm-4 col-lg-3 u-mb4 u-lineheight2">\n                {{ item.amenity }}\n                <p v-if="item.description" class="u-lineheight2 u-pr2"><small>{{ item.description }}</small></p>\n              </div>\n            </div>\n\n          </div>\n\n          <space-reviews v-bind:googlePlace="googlePlace" v-bind:googleReviewURL="googleReviewURL"></space-reviews>\n\n        </div>\n\n        <div id="bottomspacer" style="height: 3.5rem;"></div>\n\n      </div>\n\n    </div>\n  ',data:()=>({space:[],googlePlaceID:"",googlePlace:""}),computed:{spaceAmenities(){var e=[];return space=this.space,space.amenities&&space.amenities.free?e=space.amenities.free:space.amenities&&(e=space.amenities),e},spaceGallery(){var e=[];return space=this.space,space.gallery?e=space.gallery:space.image&&e.push({URL:space.image}),e},googleReviewURL(){if(this.googlePlaceID&&this.googlePlaceID.length>0)return"https://search.google.com/local/writereview?placeid="+this.googlePlaceID}},mounted(){axios.get(this.$root.apiURL+"api/spaces/"+this.id).then(e=>{this.space=e.data.response,this.googlePlaceID=e.data.response.google_place_id,this.googlePlaceID&&this.googlePlaceID.length>0&&this.getGoogleInfo()})},methods:{linkify:e=>(e&&-1===e.indexOf("http")&&(e="http://"+e),e),getGoogleInfo(){baseURL="https://maps.googleapis.com/maps/api/place/details/json",placeID=this.googlePlaceID,APIKey=this.$root.googleMapsAPIKey,PlaceDetailsURL=baseURL+"?placeid="+placeID+"&key="+APIKey,axios.get(this.$root.apiURL+"api/cors/?url="+encodeURIComponent(PlaceDetailsURL)).then(e=>this.googlePlace=e.data.response.result)}}}),SpacesIndex=Vue.component("spaces-index",{template:'\n    <div class="main">\n\n      <app-nav\n        v-bind:spaces_count="filteredSortedSpaces.length"\n        v-bind:filteredSortedSpaces="filteredSortedSpaces"\n        v-bind:workspaceFilter="workspaceFilter"\n        @click="function(id) { setWorkspaceFilter(id) }">\n      </app-nav>\n\n      <splash-dialog></splash-dialog>\n\n      <workspaces-prices\n        v-bind:visibleWorkspaces="$root.visibleWorkspaces" \n        v-bind:filteredSortedSpaces="filteredSortedSpaces"\n        v-bind:workspaceFilter="workspaceFilter"\n        @click="function(id) { setWorkspaceFilter(id) }">\n      </workspaces-prices>\n\n      <spaces-map \n        v-bind:spaces="filteredSortedSpaces"\n        @hoverover="function(id) { mapHovered = id }"\n        @hoverout="mapHovered = \'\'"\n        @click="function(id) { clickOnMap(id) }">\n      </spaces-map>\n\n      <div class="spaces-index">\n\n        <div class="spaces-toolbar u-ph1 u-pv3">\n          <span class="field-wrap field-wrap--select spaces-toolbar__type">\n            <select class="field" v-model="workspaceFilter">\n              <option v-for="ws in $root.visibleWorkspaces" :value="ws.id">{{ ws.name }}</option>\n            </select>\n          </span>\n          <span class="field-wrap u-flex-grow1 spaces-toolbar__search">\n            <input class="field u-widthfull" type="text" v-model="filterText" placeholder="Filter" />\n            <button class="button button--circle button--white field-wrap__appendRight" v-if="filterText.length > 0" @click="filterText = \'\'"><span class="close">&times;</span></button>\n          </span>\n          \x3c!--<button class="button button--outline" @click="spaceOrder = \'random\'">Shuffle</button>--\x3e\n          <button class="button button--outline" v-if="spaceOrder == \'id\'" @click="spaceOrder = \'title\'"><i class="ti ti-exchange-vertical"></i> name</button>\n          <button class="button button--outline" v-if="spaceOrder == \'title\'" @click="spaceOrder = \'id\'"><i class="ti ti-exchange-vertical"></i> ID</button>\n        </div>\n\n        <transition-group tag="div" class="spaces-list row" :class="{ isLoading: (spaces.length == 0) }">\n          <space-item\n            v-for="space in filteredSortedSpaces"\n            v-bind:space="space"\n            v-bind:key="space.id"\n            v-bind:mapHovered="mapHovered"\n            v-bind:visibleTypes="$root.visibleTypes"\n            v-bind:workspaceFilter="workspaceFilter"\n            class="item">\n          </space-item>\n        </transition-group>\n\n        \x3c!--<div class="u-aligncenter">\n          <button class="button button--outline">Show closed spaces...</button>\n        </div>--\x3e\n        \n        <div id="bottomspacer" style="height: 3.5rem;"></div>\n\n      </div>\n\n    </div>\n  ',data:()=>({spaces:[],spaceOrder:"id",filterText:"",workspaceFilter:0,mapHovered:""}),computed:{filteredSortedSpaces(){if(filteredSpaces=this.spaces,activeFilter=this.workspaceFilter,0!==activeFilter&&(filteredSpaces=this.spaces.filter(function(e){$result=!1;for(i in e.workspaces)e.workspaces[i].ws_type_id==activeFilter&&($result=!0);return $result})),searchedSpaces=filteredSpaces,this.filterText.length>1){var e=new RegExp(this.filterText,"i");searchedSpaces=filteredSpaces.filter(function(s){return!(!s.description||!s.description.match(e))||s.title.match(e)})}return this.sortBy(searchedSpaces,this.spaceOrder)}},mounted(){axios.get(this.$root.apiURL+"api/spaces").then(e=>this.spaces=e.data.response)},methods:{sortBy:(e,s)=>"random"==s?e.sort(function(){return.5-Math.random()}):e.sort(function(e,t){var i=e[s].toString().toUpperCase(),a=t[s].toString().toUpperCase();return i<a?-1:i>a?1:0}),clickOnMap(e){router.push({path:"/space/"+e})},setWorkspaceFilter(e){this.workspaceFilter==e?this.workspaceFilter=0:this.workspaceFilter=e}}});config=config||{env:"production",apiURL:"http://coworking.ldaniel.eu/api/",googleMapsAPIKey:"AIzaSyBMFotJFUPtOhGds8oklETkMO9knxQvnB0"},Vue.use(VueGoogleMaps,{load:{key:config.googleMapsAPIKey}});const routes=[{path:"/",component:SpacesIndex},{path:"/space/:id",component:SpacesDetail,props:!0}],scrollBehavior=function(e,s,t){return e.hash?{selector:e.hash}:t||{x:0,y:0}},router=new VueRouter({routes:routes,scrollBehavior:scrollBehavior,linkActiveClass:"isActive"});var app=new Vue({el:"#app",router:router,data:{googleMapsAPIKey:config.googleMapsAPIKey,apiURL:config.apiURL,visibleTypes:[{id:0,name:"All"},{id:1,name:"Business Center"},{id:2,name:"Corporate Office"},{id:3,name:"Coworking Space"},{id:5,name:"Startup Office"}],visibleWorkspaces:[{id:0,name:"All"},{id:1,name:"Hot Desk"},{id:2,name:"Dedicated Desk"},{id:5,name:"Private Office"}]}});